{% extends "base.html" %}

{% block title %}æ–‡çŒ®ãƒªã‚¹ãƒˆ - RefSys{% endblock %}

{% block content %}
<div class="card">
    <h2>ğŸ“š æ–‡çŒ®ãƒªã‚¹ãƒˆ</h2>
    
    {% if works %}
    <p>å…¨ {{ works|length }} ä»¶</p>
    
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>ã‚¿ã‚¤ãƒˆãƒ«</th>
                <th>è‘—è€…</th>
                <th>å¹´</th>
                <th>ã‚¿ã‚¤ãƒ—</th>
                <th>æŸ»èª­</th>
                <th>åˆæ„åº¦</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            {% for work in works %}
            <tr>
                <td><code>{{ work.id[:8] }}</code></td>
                <td><a href="/works/{{ work.id }}">{{ work.title[:60] }}{% if work.title|length > 60 %}...{% endif %}</a></td>
                <td>{{ work.authors|join(', ')[:40] }}{% if work.authors|join(', ')|length > 40 %}...{% endif %}</td>
                <td>{{ work.issued_year or '-' }}</td>
                <td>{{ work.type }}</td>
                <td>
                    {% if work.peer_reviewed == 1 %}
                    <span class="badge badge-peer-reviewed">âœ“</span>
                    {% elif work.peer_reviewed == 0 %}
                    <span class="badge badge-not-peer-reviewed">âœ—</span>
                    {% else %}
                    <span class="badge">?</span>
                    {% endif %}
                </td>
                <td>
                    {% if work.consensus_score %}
                    <span class="badge" style="background: 
                        {% if work.consensus_score >= 80 %}#27ae60
                        {% elif work.consensus_score >= 65 %}#2ecc71
                        {% elif work.consensus_score >= 50 %}#f39c12
                        {% else %}#e74c3c{% endif %}; color: white;">
                        {{ work.consensus_score }}
                    </span>
                    {% else %}
                    -
                    {% endif %}
                </td>
                <td>
                    <a href="/works/{{ work.id }}" class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;">è©³ç´°</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="alert alert-info">æ–‡çŒ®ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
    {% endif %}
</div>

<div class="card">
    <a href="/" class="btn">â† ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
</div>
{% endblock %}
